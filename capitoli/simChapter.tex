%Andrea Borghesi
%Università degli studi di Bologna

%capitolo dedicato alla simulazione 

\documentclass[12pt,a4paper,openright,twoside]{report}
\usepackage[italian]{babel}
\usepackage{indentfirst}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{fancyhdr}
\usepackage{graphicx}
\usepackage{titlesec,blindtext, color}
\usepackage[font={small,it}]{caption}
\usepackage{subfig}
\usepackage{listings}
\usepackage{color}
\usepackage{url}
\usepackage{textcomp}

%impostazioni generali per visualizzare codice
\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{mauve}{rgb}{0.58,0,0.82}
 
\lstset{ %
  basicstyle=\footnotesize,           % the size of the fonts that are used for the code
  backgroundcolor=\color{white},      % choose the background color. You must add \usepackage{color}
  showspaces=false,               % show spaces adding particular underscores
  showstringspaces=false,         % underline spaces within strings
  showtabs=false,                 % show tabs within strings adding particular underscores
  tabsize=2,                      % sets default tabsize to 2 spaces
  breaklines=true,                % sets automatic line breaking
  breakatwhitespace=false,        % sets if automatic breaks should only happen at whitespace
  title=\lstname,                   % show the filename of files included with \lstinputlisting;
                                  % also try caption instead of title
  keywordstyle=\color{blue},          % keyword style
  commentstyle=\color{dkgreen},       % comment style
  stringstyle=\color{mauve},         % string literal style
  escapeinside={\%*}{*)},            % if you want to add LaTeX within your code
  morekeywords={*,...},              % if you want to add more keywords to the set
  deletekeywords={...}              % if you want to delete keywords from the given language
}

%per avere un bordo intorno alle figure
\usepackage{float}
\floatstyle{boxed} 
\restylefloat{figure}

%per poter poi impedire che certe parole vadano a capo
\usepackage{hyphenat}
\usepackage{listings}

%ridefinisco font per fancyhdr, per ottenere un'intestazione pulita
\newcommand{\changefont}{ \fontsize{9}{11}\selectfont }
\fancyhf{}
\fancyhead[LE,RO]{\changefont \slshape \rightmark} 	%section
\fancyhead[RE,LO]{\changefont \slshape \leftmark}	%chapter
\fancyfoot[C]{\changefont \thepage}					%footer

%titolo capitolo con "numero | titolo"
\definecolor{gray75}{gray}{0.75}
\newcommand{\hsp}{\hspace{20pt}}
\titleformat{\chapter}[hang]{\Huge\bfseries}{\thechapter\hsp\textcolor{gray75}{|}\hsp}{0pt}{\Huge\bfseries}


\oddsidemargin=30pt \evensidemargin=20pt

%sillabazioni non eseguite correttamente
\hyphenation{sil-la-ba-zio-ne pa-ren-te-si si-mu-la-to-re ge-ne-ra-re pia-no}

%interlinea
\linespread{1.15}  
\pagestyle{fancy}

%cartelle contenenti le immagini
\graphicspath{{/media/sda4/tesi/immagini/grafici/}{/media/sda4/tesi/immagini/schemi/}{/media/sda4/tesi/immagini/simulazione/}}

%in modo che dopo il titolo di un paragrafo il testo vada a capo
\newcommand{\myparagraph}[1]{\paragraph{#1}\mbox{}\\}

\begin{document}
\chapter{SIMULAZIONE}

In questo capitolo verrà illustrato in che modo abbiamo studiato le relazioni che legano i diversi aspetti del piano energetico regionale, concentrandoci particolarmente su come la creazione di meccanismi di incentivazione da parte della regione Emilia-Romagna possa influenzare la produzione di energia elettrica proveniente da impianti fotovoltaici.
Per capire queste relazioni abbiamo scelto un approccio basato sulle simulazioni, cioè di realizzare un modello dell'aspetto della realtà da noi preso in esame e attraverso esso esaminare le dinamiche del sistema di nostro interesse.
\\*
Ora saranno presentati gli strumenti di cui ci siamo serviti implementare il modello sopra citato e in seguito il simulatore vero e proprio, spiegandone caratteristiche, funzionalità e limitazioni.

\section{STRUMENTI}

Gli strumenti principali che abbiamo utilizzato per realizzare il simulatore sono due:\begin{itemize}
	\item \emph{Netlogo}, un software che offre un ambiente di sviluppo ideale per la realizzazione di modelli di simulazioni ad agenti, di networks e di sistemi dinamici (sviluppato nel presso il Center for Connected Learning and Computer-Based Modeling della Northwestern University);
	\item \emph{R}, ambiente di sviluppo open source specifico per l'analisi statistica dei dati, basato sull'omonimo linguaggio di programmazione.
\end{itemize}

\subsection{NETLOGO}

Netlogo è un linguaggio di programmazione e ambiente di sviluppo open source che permette la modellazione di sistemi complessi formati da molteplici agenti che interagiscono tra loro, studiandone l'evoluzione  e visualizzandola in tempo reale.
\\* L'ambiente di sviluppo è scritto in Java (con il vantaggio quindi di ottenere una grande portabilità del software stesso) e il linguaggio eredita ed estende le caratteristiche del linguaggio di programmazione multiparadigma Logo, realizzato negli anni '60 presso il Massachusetts Institute of Technology e caratterizzato dalla sua derivazione dal Lisp e le numerose applicazioni in ambito educativo. Il codice che definisce il comportamento degli agenti è interpretato senza necessità di essere compilato e questa caratteristica permette un'interazione a run time con il modello stesso (modificare parametri di controllo attraverso pulsanti e sliders, visualizzare dinamicamente variabili o grafici relativi alla simulazione in corso, etc..).

\myparagraph{Ambiente di sviluppo}

All'interno di Netlogo un elemento fondamentale è il "mondo virtuale", ovvero l'ambiente della simulazione all'interno del quale i diversi agenti agiscono. Gli agenti, le entità che possono eseguire istruzioni, possono essere di quattro tipi (Fig.~\ref{netlogoWorld}): \begin{itemize}
\item \emph{turtles} (tartarughe), gli agenti che possono muoversi all'interno del mondo;
\item \emph{patches}, le aeree quadrate che costituisco il mondo bidimensionale di Netlogo e sopra le quali si possono spostare le turtles;
\item \emph{links}, i collegamenti tra due diverse turtles, non hanno una posizione né risiedono su patches e possono orientati o non orientati;
\item \emph{observer}, il quale rappresenta concettualmente la vista complessiva del modello visto da fuori e contiene tutte le informazioni macro del modello e, quindi, tutte le variabili globali che lo caratterizzano.
\end{itemize}

\begin{figure}[htb]
	\begin{center}
	\includegraphics[scale=0.3]{netlogoWorld}
	\end{center}
	\caption{Il mondo virtuale di Netlogo}
  	\label{netlogoWorld}
\end{figure}

Le tartarughe popolano il modello ed operano in parallelo, interagendo tra loro e con le patches su cui si muovono; possono essere specificate diverse tipologie di turtles che, nel linguaggio Logo, prendono il nome di breed, ovvero razza, caratteristica che in parte richiama il concetto di classe nel paradigma della programmazione ad oggetti, in quanto ogni razza possiede una lista di attributi e variabili proprietarie comuni solo agli agenti che vi appartengono.\\*\\*
L'ambiente di sviluppo è costituito da un'interfaccia grafica che consente di interagire intuitivamente con i parametri che regolano il modello o eseguire determinate azioni, attraverso l'uso di determinati pulsanti, sliders o altri elementi inseriti durante lo sviluppo del modello; questa interfaccia ha anche l'importante funzione di mostrare in tempo reale i movimenti degli agenti all'interno del mondo virtuale e presentare durante e dopo la simulazione le informazioni relative alla stessa, sotto forma di grafici, tabelle, etc...\\*
Accanto all'interfaccia grafica è ovviamente presente la sezione che riguarda il codice, il quale definisce i comportamenti delle entità  che agiscono dentro il mondo virtuale. Il codice della simulazione risiede tutto all'interno di un unico listato, suddiviso in diverse procedure che sono destinate all'esecuzione da parte degli agenti o, in maniera del tutto generale, di tutte le istanze che costituiscono il modello. Le procedure, in NetLogo, vengono suddivise in due diverse tipologie, ovvero \emph{commands}, azioni che devono essere portate a termine da un agente producendo un qualche risultato, e \emph{reporters}, istruzioni per calcolare un determinato valore che verrà riportato dall'agente a chiunque lo richieda. \\*
In Figura ~\ref{netlogoUI_code} sono mostrati un esempio di una parte di iterfaccia grafica con relativi selettori e rappresentazione del mondo virtuale e il codice relativo al pulsante \emph{setup} di tale interfaccia.

\begin{figure}[hbt]
	\centering
	\subfloat[Interfaccia Grafica]{\includegraphics[scale=0.4]{netlogoUI}\label{netlogoUI}}
	\quad 
	\subfloat[Codice]{\includegraphics[scale=0.45]{netlogoCode}\label{netlogoCode}}
	\caption{Esempio dell'ambiente di sviluppo di NetLogo}
	\label{netlogoUI_code}
\end{figure}

Altro elemento fondamentale dell'ambiente di sviluppo è rappresentato dalla gestione delle variabili aggregate e le relative statistiche. Poiché lo scopo di un modello di simulazione ad agenti è spesso rappresentato dalla necessità di comprendere a livello globale il comportamento di un sistema descritto nelle sue singole componenti ne deriva la necessità di calcolare e rappresentare l'andamento nel tempo di variabili aggregate per valutare qualitativamente il modello. In NetLogo ad ognuna delle variabili del modello è possibile associare un oggetto monitor, che ne mostra dinamicamente le variazioni, oppure un grafico, che ne raffigura l'andamento nel tempo. Gli  oggetti che permettono la gestione dei grafici sono \emph{plot} e \emph{histogram}, entrambi da definire sia a livello d'interfaccia grafica come avviene anche per le procedure, sia nel codice della simulazione.\\* 


\subsection{R}

Come già accennato, R è un linguaggio di programmazione open source e un ambiente software usato per la manipolazione di dati, calcolo e analisi statistica e presentazione grafica dei risultati. Il design R è stato ampiamente influenzato da due linguaggi preesistenti, S sviluppato da J.Chambers e colleghi presso i Bell Laboratories negli anni '70 e Scheme creato presso il MIT AI Lab sempre negli anni settanta da G.L.Steele e G.J.Sussman. \\*
Il nucleo di R consiste di un linguaggio interpretato a cui sono state aggiunte numerose funzionalità per un grande numero di procedure statistiche;  tra queste è possibile ricordarne alcune: modelli di regressione lineare, lineare generalizzata e non lineare, analisi di serie temporali, classici test parametrici e non, clustering, classificazione e altre. R è facilmente estendibile grazie alla presenza di numerosi pacchetti software creati dagli utenti e dedicati a specifiche aree di studio e possiede inoltre un grande insieme di funzioni indicate per una presentazione flessibile ed efficiente dei dati e la produzione di grafici di qualità.\\*
Per interagire con l'interprete del linguaggio R è possibile fornire le istruzioni direttamente da riga di comando oppure appoggiarsi a interfacce grafiche, ma per le nostre necessità è stato sufficiente utilizzare la riga di comando\\* \\* 
Per via della sua derivazione da S, R presenta alcune caratteristiche che lo fanno rientrare all'interno del paradigma dei linguaggi Object Oriented, almeno parzialmente, e al tempo stesso possiede alcuni aspetti che lo avvicinano alla natura dei linguaggi funzionali(come Scheme), come ad esempio la possibilità di trattare le funzioni stesse come oggetti.\\* Le principali strutture dati sono le seguenti: \begin{itemize}
\item \emph{vettori}, singole entità costituite da una collezione di valori di un certo tipo come ad esempio numerici,logici o caratteri;
\item \emph{matrici (arrays)}, generalizzazioni multi-dimensionali di vettori;
\item \emph{liste}, forme di vettori più generali nelle quali gli elementi non devono necessariamente essere dello stesso tipo;
\item \emph{fattori}, oggetti simili ai vettori usati per specificare una classificazione (raggruppamento) delle componenti di altri vettori con la stessa lunghezza;
\item \emph{data frames}, strutture simili alle matrici in cui le colonne possono essere di tipi diversi;
\item \emph{funzioni}, le quali sono esse stesse oggetti e forniscono così un modo semplice e flessibile di estendere R.
\end{itemize}
Come in ogni linguaggio di programmazione è poi ovviamente possibile manipolare queste strutture dati attraverso operatori, strutture di controllo, funzioni, etc...\\* \\*
Illustreremo ora un brevissimo esempio per far capire un possibile utilizzo di R per effettuare una semplice analisi statistica. Supponiamo di voler studiare la relazione che lega due variabili, \emph{a} e \emph{b}, i cui valori si trovano in un file di tipo \emph{Comma Separated Values}. Il primo passo è importare tali valori dal file e inserirli in una struttura dati, in questo caso una matrice con due colonne (una per ogni variabile) e ordinarli in base ai valori della prima variabile.

\lstset{language=R}
\begin{lstlisting}
> matrice.dati <- read.csv("file.csv")
> matrice.ordinata <- matrice_dati[order(matrice.dati$a),]
\end{lstlisting}

A questo punto sarebbe possibile svolgere diverse operazioni sui dati (ad esempio calcolare per ogni valore di ogni variabile i valori medi,...) ma ci limiteremo a effettuare una semplice regressione lineare.
\begin{lstlisting}
> modello.lineare <- lm(matrice$b ~ matrice$a)
\end{lstlisting}

\begin{figure}[hbt]
	\centering
	\subfloat[Grafico]{\includegraphics[scale=0.4]{example_r_graph}\label{example_r_graph}} 
	\quad
	\subfloat[Analisi statistica]{\includegraphics[scale=0.6]{example_r_result}\label{example_r_result}}
	\caption{Esempio di utilizzo di R}
	\label{example_r}
\end{figure}

R ci consente ora di effettuare analisi statistiche sul modello di regressione applicato per stabilirne validità e significatività in rapporto ai dati in nostro possesso e successivamente di presentare graficamente i risultati ottenuti.
\begin{lstlisting}
> #analisi statistica minima
> summary(modello.lineare)       
> #disegna i punti corrispondenti ai valori nella matrice
> plot(matrice$b ~ matrice$a,type="p",lwd=3,ylab="b",xlab="a")    
> #disegna la curva di regressione
> lines(matrice$a,predict(modello.lineare), lty="solid", col="darkred", lwd=2)    
\end{lstlisting}


In Figura ~\ref{example_r} sono stati riportati il grafico prodotto da questo esempio e i risultati ottenuti dalla semplicissima analisi statistica, tra i quali notiamo il coefficiente di determinazione (R-squared) e l'errore residuo ( 
Residual standard error).



\section{MODELLO AD AGENTI}

Dopo aver mostrato di quali strumenti software ci siamo serviti per sviluppare un modello che permetta di esaminare la produzione di energia da fonti rinnovabili nella regione Emilia-Romagna, introdurremo ora la metodologia scelta per realizzare la nostra modellazione di realtà.\\*
In generale esistono numerose tecniche di simulazione che si differenziano per i diversi metodi di formalizzazione dei modelli, i linguaggi simbolici usati e i gli ambiti di applicazione più indicati (tecniche matematiche, statistiche, sperimentali,..). In questo lavoro abbiamo scelto di sviluppare un modello basato sul paradigma della simulazione ad agenti, il quale trae origine dall'unione della teoria della complessità con l'intelligenza artificiale distribuita.\\*\\*
Riprendendo la definizione di Russel e Norvig (\cite{Russell}) un \emph{agente} è qualsiasi cosa possa essere vista come un sistema che percepisce il suo ambiente attraverso sensori e agisce su di esso mediante attuatori, in particolare un agente software è un'istanza di una classe del paradigma della programmazione ad oggetti, ovvero un oggetto indipendente  che incapsula proprietà e funzioni autonome ed interagisce, secondo protocolli di comunicazione, con altri oggetti/agenti altrettanto autonomi.Sempre secondo Russel e Norving, ogni agente è in grado di percepire le sue stesse azioni ma non sempre gli effetti che ne derivano.\\* Gli autori descrivono accuratamente quattro tipi di agenti differenti:
\begin{itemize}
\item agenti reattivi semplici;
\item agenti reattivi basati sul modello;
\item agenti basati su obiettivi;
\item agenti basati sull'utilità.
\end{itemize}
Gli agenti reattivi semplici basano le loro azioni e decisioni solo sulla base dello stato attuale del modello, ovvero sulla percezione corrente, ignorando tutta la storia precedente. Agiscono quindi sulla base di una determinata regola la cui condizione corrisponde allo stato corrente.\\*
Gli agenti basati sul modello invece devono memorizzare una stato interno che dipende dalla storia delle percezioni: questo tipo di agente deve, prima di compiere un'azione, aggiornare lo stato interno in funzione di quello presente, del tipo di azione che deve compiere e delle percezioni che rileva dall'ambiente, dopodiché si comporterà come un normale agente reattivo.\\* \\*
Gli agenti basati su obiettivi sono definiti così poiché oltre alle informazioni sullo stato corrente hanno bisogno di informazioni riguardanti i propri obiettivi. Infatti quest'ultimi, oltre a tenere traccia dell'ambiente nel quale agiscono, devono memorizzare un insieme di obiettivi  e scegliere   l'azione opportuna che li porterà a soddisfarli. Tale scelta è piuttosto semplice quando l'obiettivo può essere raggiunto con un solo passo esecutivo; diversamente, quando l'agente deve considerare lunghe sequenze di azioni alternative per poter scegliere il "cammino" che porta al risultato prefissato, può dotarsi di tecniche dell'intelligenza artificiale  (IA) come la ricerca e la pianificazione.
\\*
Nella maggioranza dei casi reale non è sufficiente specificare degli obiettivi da raggiungere, ma occorre anche specificare quali stati siano di maggiormente utili e quindi preferibili ad altri; è quindi opportuno considerare una funzione di utilità (detta funzione di fitness) che permetta di assegnare ad un determinato stato il relativo grado di utilità di quest'ultimo al fine del raggiungimento dell'obiettivo finale. Una specifica completa della funzione di utilità permette di effettuare scelte razionali nel caso in cui i soli obiettivi non bastano (es. più obiettivi in conflitto fra loro, confronto probabilità di successo e importanza degli obiettivi). Gli agenti che si servono della funzione di utilità per valutare il giusto cammino sono chiamati agenti basati sull'utilità.
\\* \\*
Dopo la breve panoramica sulle diverse tipologie di agenti che possono popolare un ambiente simulato, definiamo il concetto di sistema multi agente (\emph{MAS} Multi Agent System): un insieme di agenti collocati in un determinato ambiente ed interagenti tra loro mediante una specifica organizzazione. Come abbiamo visto in precedenza questi sistemi sono oggetto di ricerche da lunga data nell'ambito dell'intelligenza artificiale e costituiscono un'interessante tipologia di modellazione di società e proprio per questo troviamo diversi campi dove vengono utilizzati.\\*
Da un punto di vista meno tecnico ma più sociologico, un modello ad agenti consente di ''indagare un dato fenomeno sociale macro attraverso la rappresentazione di regole di comportamento micro seguite da agenti che interagiscono all'interno di vincoli ambientali macro, siano essi di tipo geografico, spaziale, strutturale e/o istituzionale'' (Squazzoni, \cite{Squazzoni})\\*
Una delle principali caratteristiche degli agenti è rappresentata dalla eterogeneità di quest'ultimi che permette ai MAS di fornire nell'ambiente simulato una rappresentazione più inerente possibile della realtà, tenendo ovviamente in considerazione le inevitabili semplificazioni da apportare al modello. Inoltre nei sistemi MAS un altro vantaggio è la possibilità di rappresentare l'ambiente macro in maniera esplicita attraverso la definizione di vincoli e regole che ben si adattano ad essere modellate in un sistema software; a questo si possono aggiungere le tecniche di IA attraverso le quali gli agenti, all'interno della simulazione, possono apprendere (ad esempio sistemi a classificazione e alberi decisionali) ed evolvere nel medio/lungo periodo (algoritmi genetici).\\*\\*
Per concludere possiamo affermare che i sistemi multi agente si adattano molto bene a modellare fenomeni macro (prospettiva globale) attraverso l'utilizzo di condizioni micro che definiscono il comportamento dei singoli agenti. Scegliendo di utilizzare le simulazioni ad agenti tentiamo quindi di riprodurre un contesto di interazione da cui i fenomeni sociali emergono secondo un approccio bottom-up.


\section{SIMULATORE BASE}


Dopo aver introdotto nei paragrafi precedenti gli strumenti software che abbiamo utilizzato e il tipo di metodologia scelta, è giunto ora il momento di illustrare come il modello da simulare sia stato realizzato. Ci concentreremo prima sulla versione iniziale della simulazione ad agenti che ha lo scopo di modellare, individuare ed analizzare le principali caratteristiche che influenzano la scelta di un investimento nel settore dell'energia da fonti rinnovabili sul territorio della regione Emilia-Romagna, ed in particolare nel fotovoltaico.\\*
Dalla prospettiva degli agenti (privati, aziende,...) prima di realizzare un investimento in questo settore è necessario effettuare alcuni studi relativi al luogo di installazione, all'irraggiamento solare, alla potenza dell'impianto ed al suo rendimento e contestualmente è di fondamentale importanza effettuare un'analisi approfondita che consenta di verificare con esattezza la convenienza ed il ritorno economico dell'investimento.\\*
La simulazione è stata pensata con lo scopo di analizzare le esigenze connesse allo sviluppo di un nuovo progetto  fotovoltaico in fase di pianificazione e verificare la fattibilità dell'idea, fornendo quindi un utile strumento di valutazione per i singoli investitori, ma allo stesso tempo consente di ricavare informazioni di natura più globale, come la quantità totale di energia prodotta con tecnologie fotovoltaiche o le spese sostenute dalla regione, grazie alle quali è possibile integrare i risultati delle simulazioni all'interno del problema di ottimizzazione che ha come obiettivo la creazione di un piano energetico regionale.\\* \\*
La descrizione che segue non entrerà troppo nel dettaglio poiché l'implementazione vera e propria del simulatore è stata oggetto di un lavoro precedente, ma una panoramica generale è necessaria per comprendere le dinamiche dell'ambiente simulato e comprendere quindi i risultati ottenuti.

\subsection{DESCRIZIONE SIMULATORE}
Come molte simulazione ad agenti la gestione del tempo simulato rappresenta un elemento fondamentale nella costruzione di un buon modello e nell'applicazione sviluppata si è deciso di riprodurre lo scorrere del tempo e quindi, di conseguenza, degli eventi ad esso legati con cadenza semestrale (questa scelta è dovuta alla natura della normativa Italiana sugli incentivi nel settore fotovoltaico). Secondariamente si è dovuto determinato l'arco temporale in cui sviluppare le simulazioni: il modello simula la creazione di nuovi impianti fotovoltaici a partire dal primo semestre del 2012 sino al secondo semestre del 2016 e, poiché la tariffa incentivante applicata all'energia prodotta dagli impianti,a partire dalla data di entrata in esercizio, è garantita per un periodo di 20 anni, ne consegue che la durata delle simulazioni si estende dal primo semestre del 2012 fino al secondo semestre del 2036.
\\* \\*
Per modellare correttamente le dinamiche del sistema complesso studiato è stato necessario introdurre diversi parametri che regolano diversi aspetti della simulazione. Ad esempio, l'energia elettrica che ogni impianto è capace di generare è strettamente legata alla posizione geografica e all'orientamento dei pannelli fotovoltaici che lo compongono(per semplificare l'orientamento e l'angolo d'inclinazione dei pannelli sono state considerate ottimali, ovvero verso Sud e inclinazione 30\textdegree). Per poter realizzare un modello che simuli la nascita di nuovi impianti in qualsiasi zona del territorio italiano l'irradiazione media annuale è un parametro globale del modello il cui valore è possibile variare l'interfaccia grafica. Ancora, il parametro che controlla il costo medio al kWp in funzione di quelli che sono i relativi costi degli impianti è regolabile tramite l'interfaccia, anche dinamicamente durante la simulazione in modo tale che il costo degli impianti vari nel tempo (generalmente tenderà a diminuire nel corso degli anni). Altre variabili globali legate agli impianti sono la perdita di efficienza annuale dei pannelli fotovoltaici e il costo di manutenzione.
\\* \\*
Una volta stabiliti parametri fondamentali e costi di un impianto avviene, ogni anno, la valutazione economica legata al rendimento di quest'ultimo e quindi relativa all'investimento sostenuto per realizzarlo. Questa fase prende in considerazioni fattori strettamente legati all'andamento del costo dell'elettricità oltre che alla tariffa incentivante riconosciuta per l'energia prodotta dall'impianto. Infatti i ricavi derivanti da un impianto fotovoltaico sono sia diretti, ovvero derivanti da incentivi e dall'eventuale vendita dell'energia in eccesso, ma anche indiretti come l'autoconsumo; per semplificare il modello è stata prevista una sola modalità di valorizzazione dell'energia prodotta e non direttamente consumata, ovvero il ritiro dedicato da parte del gestore della società elettrica.

\subsection{AGENTI DEL MODELLO}
Per ogni step esecutivo, compreso tra il 2012 e il 2016 il sistema genera un determinato numero di agenti, numero che può essere anche fatto variare dinamicamente tramite un opportuno selettore dell'interfaccia di Netlogo. Ogni agente è caratterizzato da diversi parametri, tra i quali è opportuno ricordare:
\begin{itemize}
\item \emph{Id}, identificativo univoco agente;
\item \emph{Superficie a disposizione}, metri quadri disponibili per installare l'impianto fotovoltaico;
\item \emph{Budget}, importo dedicabile all'investimento;
\item \emph{Consumo medio annuale di elettricità}, espresso in kWh annui;
\item \emph{Percentuale di copertura consumi richiesta}, obiettivo di copertura in percentuale dei consumi di elettricità tramite la produzione di energia dall'impianto fotovoltaico;
\item \emph{Aumento percentuale dei consumi annuali}, poiché tendenzialmente ogni anno i consumi tendono a variare, di solito aumentando;
\item \emph{Ostinazione}, nell'effettuare l'investimento, intervallo [1..100].
\end{itemize}
Questi parametri sono fondamentali per far si che l'agente posso valutare la fattibilità di realizzazione dell'impianto. Ad esempio nel caso di un agente che abbia come obiettivo la copertura del 100\% dei consumi annuali di elettricità ma abbia a disposizione una superficie che può ospitare un impianto che al massimo garantirebbe una produzione di energia pari al 50\% del fabbisogno, questo agente sarebbe costretto ad abbandonare l'idea di un investimento a meno di non ridurre i propri obiettivi di produzione energetica e quindi di copertura dei consumi risultando particolarmente ostinato ad effettuare l'investimento. Oppure potrebbero comparire considerazioni legate a questioni economiche: nel caso in cui il budget a disposizione dell'agente non sia sufficientemente a garantire la copertura dei costi di realizzazione e installazione dell'impianto potrebbe risultare obbligatorio abbandonare il progetto a meno di non ricorrere a un prestito. \\*
Gli agenti che optano per abbandonare l'idea di un investimento vengono eliminati dal modello mentre quelli che, a margine dello studio di fattibilità, decidono di effettuare l'investimento daranno vita alla generazione di un nuovo impianto. Come per gli agenti, gli impianti possiedono attributi che li caratterizzano: data di entrata in funzione, tipologia, tecnologia di realizzazione, costo, fascia potenza, tariffa incentivante riconosciuta e dimensione.

\subsection{Valutazione fattibilità investimento}
Sulla base dei parametri che definiscono il modello ogni agente è in grado di valutare la fattibilità economica dell'investimento calcolando il VAN (il Valore attuale netto dell'investimento) per l'impianto da realizzare; da questo valore è possibile individuare il PBT (Pay Back Time), il periodo necessario per il ''ritorno'' dell'investimento iniziale, e il ROE (Return On Equity), l'indice di redditività del capitale investito.\\*
Alcune variabili globali usate per la valutazione di fattibilità sono:
\begin{itemize}
\item i prezzi dell'energia elettrica praticati all'utente finale (distinti in cinque fasce di consumo);
\item la variazione annuale prezzi elettricità, parametro modificabile dinamicamente, incide sia sui prezzi dell'energia elettrica sia sui prezzi minimi garantiti dal gestore della società elettrica per il ritiro dedicato;
\item costo medio al kWp, cioè il costo medio per ogni kWp installato;
\item incentivi installazione e percentuale incentivi installazione, rappresentano il meccanismo principale con cui la regione può tentare di influenzare le scelte degli agenti sottraendo dal costo sostenuto per l'impianto una percentuale del costo stesso;
\item tasso lordo rendimento BOT, utilizzato per il calcolo dei flussi di cassa ed avere un parametro di confronto per quanto concerne la redditività del capitale investito;
\item prezzi minimi garantiti dal gestore della società elettrica per il ritiro dedicato (sulla base della potenza minima dell'impianto).
\end{itemize}

Una volta assegnati i parametri globali e i parametri individuali (con valori casuali o a partire da serie storiche) per ogni agente vengono individuate le caratteristiche di potenza che l'impianto fotovoltaico dovrà soddisfare, in particolare per determinare la quantità di energia elettrica che l'impianto dovrà produrre al fine di soddisfare l'esigenze dell'agente. Sulla base di tali esigenze si può individuare quale sarà la dimensione dell'impianto, dalla quale è poi facile dedurre i costi di realizzazione dello stesso.



La cosa principale da capire riguardante il comportamento degli agenti è il fatto che essi prendano le loro decisioni in maniera individuale sulla base delle proprie considerazioni di fattibilità economica, guadagno o ostinazione personale e alla fine le loro scelte singole concorrono a generare una certa produzione totale di energia da impianti fotovoltaici. Dal punto di vista della regione Emilia-Romagna il valore della produzione di energia fotovoltaica totale è fondamentale in quanto è il parametro osservabile in uscita dal simulatore che rivela se il piano energetico regionale, il quale prevede che certe quote di energia debbano essere prodotte da fonti rinnovabili, sia fattibile, o se invece sia necessario un investimento maggiore fornendo ad esempio incentivi di entità maggiore, grazie ai quali un maggior numero di agenti possa effettuare la scelta di installare un impianto fotovoltaico.


\section{SIMULATORE ESTESO}

\subsection{MODALITÀ INCENTIVANTI}

\subsection{INTERAZIONE SOCIALE}


\section{LIMITI SIMULATORE}

\nocite{*}
\bibliographystyle{plain}
\bibliography{bibliography}

\end{document}
